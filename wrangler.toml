name = "mccal-api"
main = "worker.js"
compatibility_date = "2025-12-03"
account_id = "2ac16bbf295c2dacf6e2d7c135c8ebdb"
workers_dev = true
routes = [
  { pattern = "api.mcc-cal.com/*", zone_name = "mcc-cal.com" }
]

[env.production]
name = "mccal-api-prod"

[[env.production.kv_namespaces]]
binding = "MCCAL_KV"
id = "a93e7efa3f88410fa42b90fec951daff"

[env.staging]
name = "mccal-api-staging"
routes = [
  { pattern = "api-staging.mcc-cal.com/*", zone_name = "mcc-cal.com" }
]

[vars]
ALLOWED_ORIGINS = "http://localhost:3000,http://localhost:8787,https://mcc-cal.com,https://*.squarespace.com,https://api.mcc-cal.com,https://mccal-api.mccal.workers.dev"
MANIFEST_BASE_URL = "https://raw.githubusercontent.com/McCal-Codes/McCals-Website/main/src/images/Portfolios"
MANIFEST_TYPES = "concert,events,journalism,nature,portrait,portfolio"
BLOG_BASE_URL = "https://McCal-Codes.github.io/McCals-Website/src/images/blog"
# BLOG_AUTHORS is set as a remote secret, not here - keep it secret!
# Cache configuration (in seconds)
CACHE_TTL_SECONDS = "600"
# Rate limiting: max requests per window
RATE_LIMIT_REQUESTS = "100"
RATE_LIMIT_WINDOW_MS = "60000"
# WEBHOOK_SECRET should be set as a secret, not in plaintext here
# Use: wrangler secret put WEBHOOK_SECRET

[[kv_namespaces]]
binding = "MCCAL_KV"
id = "a93e7efa3f88410fa42b90fec951daff"
# preview_id = "..."  # optional if you also created a preview namespace

[observability]
enabled = true

[observability.logs]
enabled = true
